{"content": "TERM: Living Specification: Protocol & VCD Event Schema: VcdEvent (Timeline Atom)\n\nDEFINITION:\n```json\n{\n  \"id\":\"uuid\",\"t\":1245,\n  \"type\":\"WorkflowStart|TaskEvaluation|TaskExecution|TaskSuccess|TaskFailure|WorkflowSuccess|WorkflowFailure|ThoughtTrail|IAR|SPR|Temporal|Meta|Complex|Implementation\",\n  \"message\":\"string\",\n  \"metadata\":{\"task_id\":\"deconstruct_code_blueprints\",\"attempt\":1},\n  \"severity\":\"info|success|warn|error\"\n}\n```\n\nBLUEPRINT DETAILS:\nExtracted from /mnt/3626C55326C514B1/Happier/specifications/protocol_event_schema.md, type: specification_md\n\nFULL SPECIFICATION (protocol_event_schema.md):\n# Living Specification: Protocol & VCD Event Schema\n\n## Overview\n\nThe **Protocol & VCD Event Schema** defines the canonical JSON data structures that standardize communication between ArchE's core engine, protocol processors, and the Visual Cognitive Debugger (VCD) UI. This schema establishes the foundational data contracts that enable real-time observability of ArchE's cognitive processes, protocol execution, and Phoenix operations.\n\nThe schema consists of two primary data structures: **EnhancedMessage** (a comprehensive envelope containing all cognitive metadata) and **VcdEvent** (lightweight timeline atoms for real-time streaming). The EnhancedMessage includes IAR reflections, SPR activations, temporal context, meta-cognitive state, complex system visioning data, implementation resonance tracking, thought trails, and protocol initialization/error information. The VcdEvent provides granular task-level events for workflow execution tracking. The schema includes comprehensive emission contracts, error handling protocols, Phoenix phase markers, versioning standards, and security constraints to ensure reliable, observable, and secure communication across ArchE's distributed cognitive architecture.\n\n## EnhancedMessage (Envelope)\n```json\n{\n  \"id\":\"uuid\",\"content\":\"string\",\"timestamp\":\"2025-08-08T12:34:56Z\",\"sender\":\"user|arche\",\n  \"message_type\":\"chat|iar|spr|temporal|meta|complex|implementation|protocol_init|error\",\n  \"protocol_compliance\":true,\n  \"protocol_version\":\"ResonantiA v3.1-CA\",\n  \"iar\": { \"status\":\"ok|warn|error\",\"confidence\":0.92 },\n  \"spr_activations\":[{\"spr_id\":\"Cognitive resonancE\",\"confidence\":0.88}],\n  \"temporal_context\": {\"timeframe\":\"short\",\"forecasts\":{\"metric\":1.23}},\n  \"meta_cognitive_state\": {\"sirc_active\":false,\"shift_active\":false},\n  \"complex_system_visioning\": {\"abm_summary\":\"string\",\"indicators\":{\"gini\":0.41}},\n  \"implementation_resonance\": {\"crdsp_pass\":true,\"docs_updated\":true},\n  \"thought_trail\":[\"string\"],\n  \"protocol_init\":{\"session_id\":\"phoenix_123\",\"version\":\"v3.1-CA\"},\n  \"protocol_error\":{\"message\":\"string\",\"error\":\"details\",\"fallback_mode\":true}\n}\n```\n\n## VcdEvent (Timeline Atom)\n```json\n{\n  \"id\":\"uuid\",\"t\":1245,\n  \"type\":\"WorkflowStart|TaskEvaluation|TaskExecution|TaskSuccess|TaskFailure|WorkflowSuccess|WorkflowFailure|ThoughtTrail|IAR|SPR|Temporal|Meta|Complex|Implementation\",\n  \"message\":\"string\",\n  \"metadata\":{\"task_id\":\"deconstruct_code_blueprints\",\"attempt\":1},\n  \"severity\":\"info|success|warn|error\"\n}\n```\n\n## Emission Contract\n- `emit_vcd_event(type, message, metadata?)` ⇒ single-line JSON `VcdEvent`.\n- Task transitions: TaskEvaluation → TaskExecution → (TaskSuccess|TaskFailure).\n- Workflow MUST emit WorkflowStart and terminal success/failure.\n\n## IAR Embedding\n- When action returns IAR, emit `VcdEvent` type `IAR` with confidence/issues; envelope MAY also embed.\n\n## Errors\n- Fallback: set `protocol_error.fallback_mode=true` and emit error/warn event.\n- Exceptions: `WorkflowFailure` with `metadata.error` (truncated stack).\n\n## Phoenix Markers\n- `metadata.phase`: `ingest_spec|deconstruct_blueprints|generate_code|validate_integrity|first_sunrise`.\n\n## Versioning & Security\n- Include `protocol_version`; schema evolution: additive, optional fields.\n- No secrets; cap event payload to ~8KB; UI truncates with expand.\n\n## CRDSP Links\n- Code: `Three_PointO_ArchE/workflow_engine.py`, `webSocketServer.js`.\n- Specs: `workflow_engine.md`, `visual_cognitive_debugger_ui.md`, `autopoietic_genesis_protocol.md`.\n\n\nEXAMPLE APPLICATION:\n```json\n{\n  \"id\":\"uuid\",\"t\":1245,\n  \"type\":\"WorkflowStart|TaskEvaluation|TaskExecution|TaskSuccess|TaskFailure|WorkflowSuccess|WorkflowFailure|ThoughtTrail|IAR|SPR|Temporal|Meta|Complex|Implementation\",\n  \"message\":\"string\",\n  \"metadata\":{\"task_id\":\"deconstruct_code_blueprints\",\"attempt\":1},\n  \"severity\":\"info|success|warn|error\"\n}\n```\n\nCATEGORY: SpecificationKnowledge\n\nRELATIONSHIPS:\ntype: FromCodebase; source: /mnt/3626C55326C514B1/Happier/specifications/protocol_event_schema.md; source_type: specification_md"}