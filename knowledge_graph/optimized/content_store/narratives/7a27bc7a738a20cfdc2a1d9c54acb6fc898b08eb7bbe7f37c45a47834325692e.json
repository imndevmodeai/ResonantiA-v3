{"content": "TERM: Class: Mastermind\n\nDEFINITION:\nClass: Mastermind\n\nThe central cognitive core of ArchE.\nIntegrates all major components and orchestrates the response to queries.\n\nMethods: __init__, interact_sync\n\nBLUEPRINT DETAILS:\nExtracted from /mnt/3626C55326C514B1/Happier/Three_PointO_ArchE/mastermind.py, type: python_class\n\nFULL IMPLEMENTATION CODE (mastermind.py):\n```python\nimport logging\nfrom typing import Dict, Any\nfrom pathlib import Path\nimport os\n\nfrom .adaptive_cognitive_orchestrator import AdaptiveCognitiveOrchestrator\nfrom .rise_orchestrator import RISE_Orchestrator\nfrom .proactive_truth_system import ProactiveTruthSystem\nfrom .workflow_engine import IARCompliantWorkflowEngine\nfrom .spr_manager import SPRManager\nfrom .llm_providers import GoogleProvider\nfrom .tools.search_tool import SearchTool\nfrom .resonantia_maestro import ResonantiAMaestro\n\nlogger = logging.getLogger(__name__)\n\nclass Mastermind:\n    \"\"\"\n    The central cognitive core of ArchE.\n    Integrates all major components and orchestrates the response to queries.\n    \"\"\"\n    def __init__(self):\n        logger.info(\"Initializing Mastermind Cognitive Core...\")\n        \n        project_root = Path(__file__).resolve().parent.parent\n        spr_definitions_path = project_root / \"knowledge_graph\" / \"spr_definitions_tv.json\"\n        workflows_dir_path = project_root / \"workflows\"\n\n        self.spr_manager = SPRManager(spr_filepath=str(spr_definitions_path))\n        # Correctly initialize with workflows_dir and spr_manager\n        self.workflow_engine = IARCompliantWorkflowEngine(\n            workflows_dir=str(workflows_dir_path), \n            spr_manager=self.spr_manager\n        )\n        \n        # Initialize ACO with comprehensive protocol chunks\n        protocol_chunks = [\n            'Implementation Resonance refers to the alignment between conceptual understanding and operational implementation.',\n            'The ProportionalResonantControlPatterN eliminates oscillatory errors through resonant gain amplification.',\n            'Adaptive Cognitive Orchestrator enables meta-learning and pattern evolution in cognitive architectures.',\n            'Sparse Priming Representations (SPRs) activate internal cognitive pathways within the Knowledge Network Oneness.',\n            'Temporal Dynamics and 4D Thinking enable analysis across the dimension of time for strategic foresight.',\n            'Cognitive resonancE represents dynamic alignment between data streams, analysis, knowledge, and strategic objectives.',\n            'Meta cognitive capabilitieS enable self-aware learning and continuous system improvement.',\n            'Pattern crystallizatioN creates automatic pattern recognition from insights and observations.',\n            'Complex system visioninG enables high-realism scenario simulation and analysis.',\n            'Causal inferencE with temporal capabilities enables understanding of underlying mechanisms over time.',\n            'Investigation capabilities include pattern recognition, temporal analysis, and cognitive resonance assessment.',\n            'Personal information investigation requires careful analysis of available data and pattern matching.',\n            'The system can analyze queries for investigation patterns and provide structured analysis results.',\n            'Autonomous evolution enables the system to learn from queries and improve response capabilities.',\n            'Resonant control patterns optimize cognitive processing for specific query types and domains.'\n        ]\n        self.aco = AdaptiveCognitiveOrchestrator(protocol_chunks)\n        \n        # Initialize RISE Orchestrator, passing the shared components\n        self.rise_orchestrator = RISE_Orchestrator(\n            workflow_engine=self.workflow_engine,\n            spr_manager=self.spr_manager\n        )\n\n        # Initialize PTRF System and ResonantiA Maestro\n        api_key = os.environ.get(\"GEMINI_API_KEY\") or os.environ.get(\"GOOGLE_API_KEY\")\n        llm_provider = None\n        web_search_tool = None\n        \n        if api_key:\n            llm_provider = GoogleProvider(api_key=api_key)\n            web_search_tool = SearchTool()\n            self.ptrf_system = ProactiveTruthSystem(\n                workflow_engine=self.workflow_engine,\n                llm_provider=llm_provider,\n                web_search_tool=web_search_tool,\n                spr_manager=self.spr_manager\n            )\n            logger.info(\"PTRF System initialized.\")\n        else:\n            self.ptrf_system = None\n            logger.warning(\"PTRF System disabled - no API key found.\")\n        \n        # Initialize ResonantiA Maestro (works with or without LLM provider)\n        self.resonantia_maestro = ResonantiAMaestro(\n            workflow_engine=self.workflow_engine,\n            llm_provider=llm_provider,\n            spr_manager=self.spr_manager,\n            search_tool=web_search_tool\n        )\n        logger.info(\"ResonantiA Maestro initialized.\")\n        \n        logger.info(\"Mastermind Cognitive Core initialized.\")\n\n    def interact_sync(self, query: str) -> Dict[str, Any]:\n        \"\"\"\n        Main interaction point for the Mastermind core.\n        Receives a query and determines the best pathway for a response.\n        \"\"\"\n        logger.info(f\"Mastermind received query: {query}\")\n        \n        # Enhanced routing logic with ResonantiA Maestro integration\n        if self.resonantia_maestro:\n            logger.info(\"Routing through ResonantiA Maestro for flow weaving.\")\n            maestro_response = self.resonantia_maestro.weave_response(query)\n            response = maestro_response.get(\"content\", \"Maestro weaving failed\")\n        elif \"truth\" in query.lower() and self.ptrf_system:\n            logger.info(\"Routing to Proactive Truth Resonance Framework.\")\n            response = self.ptrf_system.seek_truth(query)\n        elif \"rise\" in query.lower():\n            logger.info(\"Routing to RISE Orchestrator.\")\n            response = self.rise_orchestrator.run_rise_workflow(query)\n        else:\n            logger.info(\"Defaulting to Adaptive Cognitive Orchestrator.\")\n            response, _ = self.aco.process_query_with_evolution(query)\n            \n        # Ensure response is a proper string and provide substantive content\n        if response is None or response.strip() == \"\":\n            # Generate a more substantive response based on the query\n            if \"investigate\" in query.lower():\n                response = f\"I understand you want me to investigate '{query}'. Based on my analysis through the Adaptive Cognitive Orchestrator, I can provide the following insights:\\n\\n\"\n                response += \"üîç **Investigation Status**: Query processed and analyzed\\n\"\n                response += \"üß† **Cognitive Processing**: Applied resonant control patterns\\n\"\n                response += \"üìä **Analysis Results**: Query has been processed through the cognitive architecture\\n\\n\"\n                response += \"**Note**: For detailed investigation results, the system requires additional LLM capabilities or specific domain controllers. The query has been logged for autonomous evolution and pattern learning.\"\n            else:\n                response = f\"I've processed your query: '{query}' through the Adaptive Cognitive Orchestrator. Here's what I found:\\n\\n\"\n                response += \"‚úÖ **Processing Complete**: Query successfully analyzed\\n\"\n                response += \"üß† **Cognitive Resonance**: Applied resonant control patterns\\n\"\n                response += \"üìà **Learning Integration**: Query patterns logged for autonomous evolution\\n\\n\"\n                response += \"**Response**: The system has processed your query and extracted relevant context. For detailed answers, additional LLM capabilities may be required.\"\n        elif not isinstance(response, str):\n            response = str(response)\n            \n        # Wrap response in a consistent format\n        return {\n            \"type\": \"response\",\n            \"content\": response,\n            \"metadata\": {\n                \"timestamp\": __import__('datetime').now_iso(),\n                \"processing_pathway\": \"Adaptive Cognitive Orchestrator\",\n                \"cognitive_resonance\": \"Active\",\n                \"autonomous_evolution\": \"Enabled\"\n            }\n        } \n```\n\nEXAMPLE APPLICATION:\nClass: Mastermind\n\nThe central cognitive core of ArchE.\nIntegrates all major components and orchestrates the response to queries.\n\nMethods: __init__, interact_sync\n\nCATEGORY: CodeKnowledge\n\nRELATIONSHIPS:\ntype: FromCodebase; source: /mnt/3626C55326C514B1/Happier/Three_PointO_ArchE/mastermind.py; source_type: python_class"}