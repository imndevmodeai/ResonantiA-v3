[
  {
    "stage_name": "Narrative",
    "content": "TERM: Class: _P\n\nDEFINITION:\nClass: _P\n\n\n\nBLUEPRINT DETAILS:\nExtracted from /mnt/3626C55326C514B1/Happier/Three_PointO_ArchE/session_state_manager.py, type: python_class\n\nFULL IMPLEMENTATION CODE (session_state_manager.py):\n```python\nimport json\nimport os\nfrom datetime import datetime\n\n# ============================================================================\n# TEMPORAL CORE INTEGRATION (CANONICAL DATETIME SYSTEM)\n# ============================================================================\nfrom .temporal_core import now_iso, format_filename, format_log, Timer\nfrom pathlib import Path\nfrom typing import Dict, Any\n\ntry:\n    from .config import get_config\nexcept Exception:  # pragma: no cover - fallback for standalone\n    def get_config():\n        class _P:\n            class paths:\n                project_root = Path(os.getcwd())\n        return _P()\n\n\ndef _state_path() -> Path:\n    cfg = get_config()\n    return Path(getattr(cfg.paths, \"project_root\", Path(os.getcwd()))) / \"session_state.json\"\n\n\ndef load_session_state() -> Dict[str, Any]:\n    \"\"\"Load session_state.json, ensuring required keys exist.\"\"\"\n    path = _state_path()\n    if not path.exists():\n        return {\"facts_ledger\": [], \"updated_at\": now_iso() + \"Z\"}\n    try:\n        with open(path, \"r\", encoding=\"utf-8\") as f:\n            data = json.load(f)\n    except Exception:\n        data = {}\n    if not isinstance(data, dict):\n        data = {}\n    data.setdefault(\"facts_ledger\", [])\n    data[\"updated_at\"] = now_iso() + \"Z\"\n    return data\n\n\ndef save_session_state(state: Dict[str, Any]) -> None:\n    \"\"\"Persist the provided state to session_state.json safely.\"\"\"\n    path = _state_path()\n    try:\n        path.parent.mkdir(parents=True, exist_ok=True)\n        tmp = path.with_suffix(\".tmp\")\n        with open(tmp, \"w\", encoding=\"utf-8\") as f:\n            json.dump(state, f, ensure_ascii=False, indent=2)\n        os.replace(tmp, path)\n    except Exception:\n        # Best-effort persistence; do not throw inside engine\n        pass\n\n\ndef append_fact(state: Dict[str, Any], fact: Dict[str, Any]) -> None:\n    \"\"\"Append an atomic fact into facts_ledger with timestamp.\"\"\"\n    if not isinstance(state.get(\"facts_ledger\"), list):\n        state[\"facts_ledger\"] = []\n    entry = {**fact}\n    entry.setdefault(\"ts\", now_iso() + \"Z\")\n    state[\"facts_ledger\"].append(entry)\n    state[\"updated_at\"] = now_iso() + \"Z\"\n\n\n\n```\n\nEXAMPLE APPLICATION:\nClass: _P\n\n\n\nCATEGORY: CodeKnowledge\n\nRELATIONSHIPS:\ntype: FromCodebase; source: /mnt/3626C55326C514B1/Happier/Three_PointO_ArchE/session_state_manager.py; source_type: python_class",
    "compression_ratio": 1.0,
    "symbol_count": 2603,
    "timestamp": "2025-11-18T11:00:02.056572Z"
  },
  {
    "stage_name": "Concise",
    "content": "TERM: Class: _P\n\nDEFINITION:\nClass: _P\n\n\n\nBLUEPRINT DETAILS:\nExtracted from /mnt/3626C55326C514B1/Happier/Three_PointO_ArchE/session_state_manager.py, type: python_class\n\nFULL IMPLEMENTATION CODE (session_state_manager.py):\n```python\nimport json\nimport os\nfrom datetime import datetime\n\n# ============================================================================\n# TEMPORAL CORE INTEGRATION (CANONICAL DATETIME SYSTEM)\n# ============================================================================\nfrom .temporal_core import now_iso, format_filename, format_log, Timer\nfrom pathlib import Path\nfrom typing import Dict, Any\n\ntry:\n    from .config import get_config\nexcept Exception:  # pragma: no cover - fallback for standalone\n    def get_config():\n        class _P:\n            class paths:\n                project_root = Path(os.getcwd())\n        return _P()\n\n\ndef _state_path() -> Path:\n    cfg = get_config()\n    return Path(getattr(cfg.paths, \"project_root\", Path(os.getcwd()))) / \"session_state.json\"\n\n\ndef load_session_state() -> Dict[str, Any]:\n    \"\"\"Load session_state.json, ensuring required keys exist.\"\"\"\n    path = _state_path()\n    if not path.exists():\n        return {\"facts_ledger\": [], \"updated_at\": now_iso() + \"Z\"}\n    try:\n        with open(path, \"r\", encoding=\"utf-8\") as f:",
    "compression_ratio": 2.000768639508071,
    "symbol_count": 1301,
    "timestamp": "2025-11-18T11:00:02.056600Z"
  },
  {
    "stage_name": "Nano",
    "content": "TERM: Class: _P D: Class: _P BLUEPRINT DETAILS: Extracted /mnt/3626C55326C514B1/Happier/Three_PointO_Æ/session_state_manager.py, type: python_class FULL I CODE (session_state_manager.py): ```python import json import os datetime import datetime # ============================================================================ # TEMPORAL CORE INTEGRATION (CANONICAL DATETIME S) # ============================================================================ .temporal_core import now_iso, F_filename, F_log, Timer pathlib import Path typing import Dict, Any try: .config import get_config except Exception: # pragma: no cover - fallback standalone def get_config(): class _P: class paths: project_root = Path(os.getcwd()) return _P() def _state_path() -> Path: cfg = get_config() return Path(getattr(cfg.paths, \"project_root\", Path(os.getcwd()))) / \"session_state.json\" def load_session_state() -> Dict[str, Any]: \"\"\"Load session_state.json, ensuring required keys exist.\"\"\" path = _state_path() if path.exists(): return {\"facts_ledger\": [], \"updated_at\": now_iso() + \"Z\"} try: open(path, \"r\", encoding=\"utf-8\") as f:",
    "compression_ratio": 2.338724168912848,
    "symbol_count": 1113,
    "timestamp": "2025-11-18T11:00:02.061277Z"
  },
  {
    "stage_name": "Micro",
    "content": "TERM: Class: D: Class: BLUEPRINT DETAILS: Extracted /mnt/3626C55326C514B1/Happier/Three_PointO_Æ/session_state_manager.py, type: python_class FULL I CODE (session_state_manager.py): ```python import import datetime import datetime ============================================================================ Δ CORE INTEGRATION (CANONICAL DATETIME S) ============================================================================ .temporal_core import now_iso, F_filename, F_log, Timer pathlib import Path typing import Dict, Any .config import get_config except Exception: pragma: cover fallback standalone get_config(): class class paths: project_root Path(os.getcwd()) return _state_path() Path: get_config() return Path(getattr(cfg.paths, \"project_root\", Path(os.getcwd()))) \"session_state.json\" load_session_state() Dict[str, Any]: \"\"\"Load session_state.json, ensuring required exist.\"\"\" _state_path() path.exists(): return {\"facts_ledger\": \"updated_at\": now_iso() open(path, encoding=\"utf-8\")",
    "compression_ratio": 2.6160804020100503,
    "symbol_count": 995,
    "timestamp": "2025-11-18T11:00:02.076165Z"
  },
  {
    "stage_name": "Pico",
    "content": "TERM: Class: D: Class: BLUEPRINT DETAILS: Extracted /mnt/3626C55326C514B1/Happier/Three_PointO_Æ/session_state_manager.py, type: python_class FULL I CODE (session_state_manager.py): ```python import import datetime import datetime ============================================================================ Δ CORE INTEGRATION (CANONICAL DATETIME S) ============================================================================ .temporal_core import now_iso, F_filename, F_log, Timer pathlib import Path typing import Dict, Any .config import get_config except Exception: pragma: cover fallback standalone get_config(): class class paths: project_root Path(os.getcwd()) return _state_path() Path: get_config() return Path(getattr(cfg.paths, \"project_root\", Path(os.getcwd()))) \"session_state.json\" load_session_state() Dict[str, Any]: \"\"\"Load session_state.json, ensuring required exist.\"\"\" _state_path() path.exists(): return {\"facts_ledger\": \"updated_at\": now_iso() open(path, encoding=\"utf-8\")",
    "compression_ratio": 2.6160804020100503,
    "symbol_count": 995,
    "timestamp": "2025-11-18T11:00:02.089098Z"
  },
  {
    "stage_name": "Femto",
    "content": "TERM: Class: D: Class: BLUEPRINT DETAILS: Extracted /mnt/3626C55326C514B1/Happier/Three_PointO_Æ/session_state_manager.py, type: python_class FULL I CODE (session_state_manager.py): ```python import import datetime import datetime ============================================================================ Δ CORE INTEGRATION (CANONICAL DATETIME S) ============================================================================ .temporal_core import now_iso, F_filename, F_log, Timer pathlib import Path typing import Dict, Any .config import get_config except Exception: pragma: cover fallback standalone get_config(): class class paths: project_root Path(os.getcwd()) return _state_path() Path: get_config() return Path(getattr(cfg.paths, \"project_root\", Path(os.getcwd()))) \"session_state.json\" load_session_state() Dict[str, Any]: \"\"\"Load session_state.json, ensuring required exist.\"\"\" _state_path() path.exists(): return {\"facts_ledger\": \"updated_at\": now_iso() open(path, encoding=\"utf-8\")",
    "compression_ratio": 2.6160804020100503,
    "symbol_count": 995,
    "timestamp": "2025-11-18T11:00:02.099894Z"
  },
  {
    "stage_name": "Atto",
    "content": "TERM: Class: D: Class: BLUEPRINT DETAILS: Extracted /mnt/3626C55326C514B1/Happier/Three_PointO_Æ/session_state_manager.py, FULL I CODE Δ CORE INTEGRATION (CANONICAL DATETIME S) F_filename, F_log, Timer Path Dict, Any Exception: Path(os.getcwd()) Path: Path(getattr(cfg.paths, Path(os.getcwd()))) Dict[str, Any]:",
    "compression_ratio": 8.369774919614148,
    "symbol_count": 311,
    "timestamp": "2025-11-18T11:00:02.111094Z"
  },
  {
    "stage_name": "Zepto",
    "content": "Æ|Δ",
    "compression_ratio": 867.6666666666666,
    "symbol_count": 3,
    "timestamp": "2025-11-18T11:00:02.112235Z"
  }
]